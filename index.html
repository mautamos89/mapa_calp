<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>

    <script type="text/javascript">
        document.title = "Mapa de rutas CALP | IMPACT-REACH";
    </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_d3414299f88fc014b04e5b787cd27146 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.css"/>
    <script src="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-search@2.9.7/dist/leaflet-search.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-search@2.9.7/dist/leaflet-search.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-tag-filter-button/src/leaflet-tag-filter-button.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-tag-filter-button/src/leaflet-tag-filter-button.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/css-ripple-effect@1.0.5/dist/ripple.min.css"/>
    
            <style>
                .easy-button-button {
                  display: block !important;
                }

                .tag-filter-tags-container {
                  left: 30px;
                }
            </style>
        
</head>
<body>
    
    
            <div class="folium-map" id="map_d3414299f88fc014b04e5b787cd27146" ></div>
        
    

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <style type='text/css'>
    .my-legend1 .map-title {
      text-align: center;
      margin-bottom: 3px;
      font-weight: bold;
      font-size: 85%;
    }
    .my-legend1 .map-header {
      text-align: left;
      margin-bottom: 1px;
      font-size: 55%;
    }
  </style>

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <script>
  $( function() {
    $( "#maptitle1" ).draggable({
      start: function (event, ui) {
        $(this).css({
          right: "auto",
          top: "auto",
          bottom: "auto"
        });
      }
    });
  });
  </script>
</head>
<body>

<div id='maptitle1' class='maptitle1'
    style='position: absolute; z-index:9999;  background-color:rgba(255, 255, 255, 0.75);
     border-radius:2px; padding: 5px; font-size:14px; left: 50px; top: 10px;'>
  <div class='my-legend1'>
    <div class='map-title'>Principales rutas de migrantes y desplazados</div>
    <div class='map-header'>PROYECTO CALP | PER-ECU | IMPACT-REACH</div>
  </div>
</div>

    

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <script>
  $( function() {
    $( "#maplegend" ).draggable({
                    start: function (event, ui) {
                        $(this).css({
                            right: "auto",
                            top: "auto",
                            bottom: "auto"
                        });
                    }
                });
});

  </script>
</head>
<body>

<div id='maplegend' class='maplegend'
    style='position: absolute; z-index:9999; background-color:rgba(255, 255, 255, 0.75);
     border-radius:2px; padding: 5px; font-size:14px; left: 5px; bottom: 40px;'>

<div class='my-legend'>
<div class='legend-title'>Leyenda</div>
<div class='legend-header'>Riesgo identificado</div>
<div class='legend-scale'>
  <ul class='legend-labels'>
    <li><span style='background:#bdd7e7;'></span>1-5 [1]</li>
    <li><span style='background:#6baed6;'></span>5-9 [2]</li>
    <li><span style='background:#08519c;'></span>10-11 [1]</li>
  </ul>
</div>
<div class='legend-vertical'>
  <ul class='legend-vertical-labels'>
    <li><span style='background:#A4303F;'></span>Ruta identificada</li>
  </ul>
</div>
</div>

<style type='text/css'>
  .my-legend .legend-title {
    text-align: center;
    margin-bottom: 3px;
    font-weight: bold;
    font-size: 80%;
    }
  .my-legend .legend-header {
    text-align: left;
    margin-bottom: 1px;
    font-size: 80%;
    }
  .my-legend .legend-scale ul {
    margin: 0;
    padding: 0;
    float: left;
    list-style: none;
    }
  .my-legend .legend-scale ul li {
    display: block;
    float: left;
    width: 45px;
    margin-bottom: 2px;
    text-align: center;
    font-size: 80%;
    list-style: none;
    }
  .my-legend ul.legend-labels li span {
    display: block;
    float: left;
    height: 15px;
    width: 45px;
    }
    .my-legend .legend-vertical ul {
    margin: 0;
    margin-bottom: 2px;
    margin-right: 0px;
    margin-left: 0px;
    padding: 0;
    float: left;
    list-style: none;
    }
  .my-legend .legend-vertical ul li {
    font-size: 80%;
    list-style: none;
    margin-left: 0px;
    margin-right: 0px;
    line-height: 18px;
    margin-bottom: 2px;
    }
  .my-legend ul.legend-vertical-labels li span {
    display: block;
    float: right;
    height: 16px;
    width: 16px;
    margin-right: 5px;
    margin-left: 5px;
    margin-bottom: 2px;
    }
</style>
</body>
<script>
    
    
            var map_d3414299f88fc014b04e5b787cd27146 = L.map(
                "map_d3414299f88fc014b04e5b787cd27146",
                {
                    center: [-6.5, -80.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 15,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_d3414299f88fc014b04e5b787cd27146);

            

        
    
            var tile_layer_dc547be7da94f977fa0a75e5fd0a824e = L.tileLayer(
                "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
                {"attribution": "OSM \u0026copy; | Autor: \u003ca href=\"https://github.com/mautamos89\" target=\"_blank\"\u003eMTM-COL\u003c/a\u003e", "detectRetina": false, "maxZoom": 20, "minZoom": 6, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            tile_layer_dc547be7da94f977fa0a75e5fd0a824e.addTo(map_d3414299f88fc014b04e5b787cd27146);
        
    
            var tile_layer_f679889ed43d94388d47c0b45164d585 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "OSM \u0026copy; | Autor: \u003ca href=\"https://github.com/mautamos89\" target=\"_blank\"\u003eMTM-COL\u003c/a\u003e", "detectRetina": false, "maxZoom": 18, "minZoom": 6, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            var tile_layer_c491ef5866638decb25c60ee15456fde = L.tileLayer(
                "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
                {"attribution": "Esri \u0026copy; | Autor: \u003ca href=\"https://github.com/mautamos89\" target=\"_blank\"\u003eMTM-COL\u003c/a\u003e", "detectRetina": false, "maxZoom": 17, "minZoom": 6, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            var tile_layer_fced17898b324d8dbd5cd4206833d629 = L.tileLayer(
                "https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}",
                {"attribution": "Google \u0026copy; | Autor: \u003ca href=\"https://github.com/mautamos89\" target=\"_blank\"\u003eMTM-COL\u003c/a\u003e", "detectRetina": false, "maxZoom": 20, "minZoom": 6, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            var tile_layer_527e94ffe0a41f3eb4f3f1e0f3e0b2f4 = L.tileLayer(
                "",
                {"attribution": "Autor: \u003ca href=\"https://github.com/mautamos89\" target=\"_blank\"\u003eMTM-COL\u003c/a\u003e", "detectRetina": false, "maxZoom": 18, "minZoom": 6, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            var feature_group_1b2afcb2e724708b6bc824e387fc1c99 = L.featureGroup(
                {}
            );
        
    
        function geo_json_5ab63e560dc76b81c9b7a41fba287151_styler(feature) {
            switch(feature.properties.provincia) {
                case "La Libertad": case "Piura": 
                    return {"color": "black", "fill": true, "fillColor": "#6baed6", "fillOpacity": 0.5, "weight": 0.2};
                case "Lambayeque": 
                    return {"color": "black", "fill": true, "fillColor": "#bdd7e7", "fillOpacity": 0.5, "weight": 0.2};
                default:
                    return {"color": "black", "fill": true, "fillColor": "#08519c", "fillOpacity": 0.5, "weight": 0.2};
            }
        }
        function geo_json_5ab63e560dc76b81c9b7a41fba287151_highlighter(feature) {
            switch(feature.properties.provincia) {
                default:
                    return {"fillColor": "#fff998"};
            }
        }

        function geo_json_5ab63e560dc76b81c9b7a41fba287151_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === "function"){
                            geo_json_5ab63e560dc76b81c9b7a41fba287151.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === "function"){
                        const highlightStyle = geo_json_5ab63e560dc76b81c9b7a41fba287151_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_5ab63e560dc76b81c9b7a41fba287151 = L.geoJson(null, {
                smoothFactor: 1.66,
                onEachFeature: geo_json_5ab63e560dc76b81c9b7a41fba287151_onEachFeature,
            
                style: geo_json_5ab63e560dc76b81c9b7a41fba287151_styler,
        });

        function geo_json_5ab63e560dc76b81c9b7a41fba287151_add (data) {
            geo_json_5ab63e560dc76b81c9b7a41fba287151
                .addData(data);
        }
            $.ajax("https://raw.githubusercontent.com/mautamos89/mapa_web_calp/main/peru_adm1.geojson", {dataType: 'json', async: false})
                .done(geo_json_5ab63e560dc76b81c9b7a41fba287151_add);

        
    
    geo_json_5ab63e560dc76b81c9b7a41fba287151.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = ["provincia", "mapa2"];
    let aliases = ["Departamento:", "Riesgo identificado:"];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i].toLocaleString()}</th>
            
            <td>${handleObject(layer.feature.properties[v]).toLocaleString()}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{"className": "foliumtooltip", "embed": false, "smoothFactor": 1, "sticky": true});
                     
    
            geo_json_5ab63e560dc76b81c9b7a41fba287151.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
        function geo_json_00598e308408f694b706270b432f6689_styler(feature) {
            switch(feature.properties.municipio) {
                case "Paita": case "Sullana": case "Talara": case "Contralmirante Villar": 
                    return {"color": "#A4303F", "fillcolor": "#A4303F", "tags": ["A2"], "weight": 4};
                case "Lambayeque": case "Morrop\u00f3n": case "Piura": 
                    return {"color": "#A4303F", "fillcolor": "#A4303F", "tags": ["A3"], "weight": 4};
                case "Ascope": case "Chep\u00e9n": case "Pacasmayo": case "Trujillo": case "Chiclayo": 
                    return {"color": "#A4303F", "fillcolor": "#A4303F", "tags": ["A4"], "weight": 4};
                case "Chao": 
                    return {"color": "#A4303F", "fillcolor": "#A4303F", "tags": ["Z1"], "weight": 4};
                default:
                    return {"color": "#A4303F", "fillcolor": "#A4303F", "tags": ["A1"], "weight": 4};
            }
        }

        function geo_json_00598e308408f694b706270b432f6689_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_00598e308408f694b706270b432f6689 = L.geoJson(null, {
                smoothFactor: 1,
                onEachFeature: geo_json_00598e308408f694b706270b432f6689_onEachFeature,
            
                style: geo_json_00598e308408f694b706270b432f6689_styler,
                localize: true,
        });

        function geo_json_00598e308408f694b706270b432f6689_add (data) {
            geo_json_00598e308408f694b706270b432f6689
                .addData(data);
        }
            $.ajax("https://raw.githubusercontent.com/mautamos89/mapa_web_calp/main/peru_ruta.geojson", {dataType: 'json', async: false})
                .done(geo_json_00598e308408f694b706270b432f6689_add);

        
    
            geo_json_00598e308408f694b706270b432f6689.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            feature_group_1b2afcb2e724708b6bc824e387fc1c99.addTo(map_d3414299f88fc014b04e5b787cd27146);
        
    
            geo_json_5ab63e560dc76b81c9b7a41fba287151.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            geo_json_00598e308408f694b706270b432f6689.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            var locate_control_1069b57fdbbfcdabbbcf033e1557ba25 = L.control.locate(
                {"position": "topleft", "strings": {"popup": "Tu ubicaci\u00f3n", "title": "Localizaci\u00f3n actual"}}
            ).addTo(map_d3414299f88fc014b04e5b787cd27146);
            
        
    
            var mouse_position_6edf601b3ad0d2be2223f36a3ab264f1 = new L.Control.MousePosition(
                {"emptyString": "Coordenadas", "lngFirst": false, "numDigits": 5, "position": "topright", "prefix": "Latitud:", "separator": " | Longitud: "}
            );
            mouse_position_6edf601b3ad0d2be2223f36a3ab264f1.options["latFormatter"] =
                function(num) {return L.Util.formatNum(num, 3) + 'º ';};;
            mouse_position_6edf601b3ad0d2be2223f36a3ab264f1.options["lngFormatter"] =
                function(num) {return L.Util.formatNum(num, 3) + 'º ';};;
            map_d3414299f88fc014b04e5b787cd27146.addControl(mouse_position_6edf601b3ad0d2be2223f36a3ab264f1);
        
    
            var feature_group_1b2afcb2e724708b6bc824e387fc1c99searchControl = new L.Control.Search({
                layer: feature_group_1b2afcb2e724708b6bc824e387fc1c99,
                
                propertyName: 'clave',
                
                collapsed: true,
                textPlaceholder: 'Departamento / IdRuta',
                position:'topleft',
            
                marker: false,
                moveToLocation: function(latlng, title, map) {
                var zoom =  map.getBoundsZoom(latlng.layer.getBounds()) 
                    map.flyTo(latlng, zoom); // access the zoom
                }
            
                });
                feature_group_1b2afcb2e724708b6bc824e387fc1c99searchControl.on('search:locationfound', function(e) {
                    feature_group_1b2afcb2e724708b6bc824e387fc1c99.setStyle(function(feature){
                        return feature.properties.style
                    })
                    
                    e.layer.setStyle({"forceSeparateButton": false});
                    
                    if(e.layer._popup)
                        e.layer.openPopup();
                })
                feature_group_1b2afcb2e724708b6bc824e387fc1c99searchControl.on('search:collapsed', function(e) {
                        feature_group_1b2afcb2e724708b6bc824e387fc1c99.setStyle(function(feature){
                            return feature.properties.style
                    });
                });
            map_d3414299f88fc014b04e5b787cd27146.addControl( feature_group_1b2afcb2e724708b6bc824e387fc1c99searchControl );

        
    
            var tile_layer_aaea18963a18046c022bb8636454ca72 = L.tileLayer(
                "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
                {"attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\"https://carto.com/attributions\"\u003eCARTO\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 20, "maxZoom": 20, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abcd", "tms": false}
            );
            var mini_map_0ce690655ac6f666bc0d0dc5ce03e502 = new L.Control.MiniMap(
                tile_layer_aaea18963a18046c022bb8636454ca72,
                {"autoToggleDisplay": false, "centerFixed": false, "collapsedHeight": 25, "collapsedWidth": 25, "height": 150, "minimized": false, "position": "bottomright", "toggleDisplay": true, "width": 150, "zoomAnimation": false, "zoomLevelOffset": -5}
            );
            map_d3414299f88fc014b04e5b787cd27146.addControl(mini_map_0ce690655ac6f666bc0d0dc5ce03e502);
        
    
            var tag_filter_button_02841f70696812b9ae60daca080354a2 = L.control.tagFilterButton(
                {"clearText": "Borrar filtro", "data": ["A1", "A2", "A3", "A4", "Z1"], "filterOnEveryClick": true, "icon": "\u003ci class=\"fa fa-filter\"\u003e\u003c/i\u003e", "openPopupOnHover": true}
            ).addTo(map_d3414299f88fc014b04e5b787cd27146);
        
    
            map_d3414299f88fc014b04e5b787cd27146.fitBounds(
                [[-8.97088985178516, -81.32823049084442], [-3.381773346862417, -76.90124323628629]],
                {}
            );
        
    
            var layer_control_a6d54add4f68617abe6e275758313fcb_layers = {
                base_layers : {
                    "CartoDB Positron" : tile_layer_dc547be7da94f977fa0a75e5fd0a824e,
                    "Open Street Map" : tile_layer_f679889ed43d94388d47c0b45164d585,
                    "Esri Sat\u00e9lite" : tile_layer_c491ef5866638decb25c60ee15456fde,
                    "Google H\u00edbrido" : tile_layer_fced17898b324d8dbd5cd4206833d629,
                    "Sin mapa base" : tile_layer_527e94ffe0a41f3eb4f3f1e0f3e0b2f4,
                },
                overlays :  {
                    "Nivel administrativo 1" : geo_json_5ab63e560dc76b81c9b7a41fba287151,
                    "Ruta identificada" : geo_json_00598e308408f694b706270b432f6689,
                },
            };
            let layer_control_a6d54add4f68617abe6e275758313fcb = L.control.layers(
                layer_control_a6d54add4f68617abe6e275758313fcb_layers.base_layers,
                layer_control_a6d54add4f68617abe6e275758313fcb_layers.overlays,
                {"autoZIndex": true, "collapsed": true, "position": "topright"}
            ).addTo(map_d3414299f88fc014b04e5b787cd27146);

        
    
            tile_layer_dc547be7da94f977fa0a75e5fd0a824e.addTo(map_d3414299f88fc014b04e5b787cd27146);
        
    
            geo_json_5ab63e560dc76b81c9b7a41fba287151.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            geo_json_00598e308408f694b706270b432f6689.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            feature_group_1b2afcb2e724708b6bc824e387fc1c99.addTo(map_d3414299f88fc014b04e5b787cd27146);
        
    
            geo_json_5ab63e560dc76b81c9b7a41fba287151.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
    
            geo_json_00598e308408f694b706270b432f6689.addTo(feature_group_1b2afcb2e724708b6bc824e387fc1c99);
        
</script>
</html>